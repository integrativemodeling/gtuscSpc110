import ihm
import ihm.reference
import os

# If we're running from an SGE job, override the from_pubmed_id() and
# from_accession() functions to return cached values, since we don't have
# network access (needed to query PubMed or UniProt directly)

def mock_from_pubmed(cls, pubmed_id):
    return ihm.Citation(
            pmid=30190596,
            title='Architecture of Pol II(G) and molecular mechanism of '
                  'transcription regulation by Gdown1.',
            journal='Nat Struct Mol Biol', volume=25, page_range=(859,867),
            year=2018, doi='10.1038/s41594-018-0118-5', authors=[
                'Jishage M', 'Yu X', 'Shi Y', 'Ganesan SJ', 'Chen WY',
                'Sali A', 'Chait BT', 'Asturias FJ', 'Roeder RG'])

# Auto-generated by util/get_accession_map.py
accession_map = {
    'P38863': {'db_code':'SPC97_YEAST', 'sequence':
        'MEIKEVDDRAELLRYTNNIPLLGKLVNHQPLWSTNPKLKSFSLEKISAPDQRRVQEALVVKDLLNV'
        'LIGLEGTYIRYFNDYEPSDPETPIEFKIAKKMDPSFKTFSRRIVRYGKQYMILTRAYEKWSDTSFG'
        'MVLQRFAYEIRRFLEDVYLKTLVERLERDFNKVPNFSIRELEQIINETEVNKQMELLYNIYEEIFR'
        'EIEERRTNQSSQEDFNNFMDSMKNESSLHLRLMVAFDTTVYPVPKGGAILKIFQQKILENLGDRSS'
        'VMFLKKLLNNISQDYCTMLYEWLTQGILNDPYQEFMTYDDLEGKTDNIFDTRDRAWDTQYFIRKDV'
        'LLRDCDSEEDKNLLFKMLRTGILLKVVRASLQIPTIPSNSSDITIQEINDFADLMEGSNLELYVDK'
        'CYSRANEIFLKLFFQGYDLINVLKHLQQIFLGYQSGHNVLKFLTKNMGELTKHYRNDNNANYDKLL'
        'QNFELERQSENPNNLMRQLLMIQFDTETLPQVLSHYLQIYPEVPENNSANDDSDPLMHANNFKNMN'
        'AILFDELSKERTGAYHGSNLELYTPKSAIYHLKFDINIPYPLNIIISRTCMIKYQIILRYQLVLQY'
        'HSRLLDETWMDLNKTPSWKYRGYSHTVKRRIVRATRVLHAKMNHFIKTIMEYFNQNVIDKEVYSLE'
        'KCYRNPTLAVAIQNELEGGLTNIMTNRCLSDLIPLQLQIFDIVYKFCKFIKSMRAKLCQLDPVLYE'
        'KHKSGMMKTLNEGYRTNNGGQEDVGYQEDAALELIQKLIEYISNASSIFRKCLINFTQELSTEKFD'
        'FYDSSSVDAAGIERVLYSIVPPRSASASSQR'},
    'P53540': {'db_code':'SPC98_YEAST', 'sequence':
        'MELEPTLFGIIEALAPQLLSQSHLQTFVSDVVNLLRSSTKSATQLGPLIDFYKLQSLDSPETTIMW'
        'HKIEKFLDALFGIQNTDDMVKYLSVFQSLLPSNYRAKIVQKSSGLNMENLANHEHLLSPVRAPSIY'
        'TEASFENMDRFSERRSMVSSPNRYVPSSTYSSVTLRQLSNPYYVNTIPEEDILKYVSYTLLATTSA'
        'LFPFDHEQIQIPSKIPNFESGLLHLIFEAGLLYQSLGYKVEKFRMLNISPMKKALIIEISEELQNY'
        'TAFVNNLVSSGTVVSLKSLYREIYENIIRLRIYCRFTEHLEELSGDTFLIELNIFKSHGDLTIRKI'
        'ATNLFNSMISLYYEYLMNWLTKGLLRATYGEFFIAENTDTNGTDDDFIYHIPIEFNQERVPAFIPK'
        'ELAYKIFMIGKSYIFLEKYCKEVQWTNEFSKKYHVLYQSNSYRGISTNFFEIINDQYSEIVNHTNQ'
        'ILNQKFHYRDVVFALKNILLMGKSDFMDALIEKANDILATPSDSLPNYKLTRVLQEAVQLSSLRHL'
        'MNSPRNSSVINGLDARVLDLGHGSVGWDVFTLDYILYPPLSLVLNVNRPFGRKEYLRIFNFLWRFK'
        'KNNYFYQKEMLKSNDIIRSFKKIRGYNPLIRDIINKLSRISILRTQFQQFNSKMESYYLNCIIEEN'
        'FKEMTRKLQRTENKSQNQFDLIRLNNGTIELNGILTPKAEVLTKSSSSKPQKHAIEKTLNIDELES'
        'VHNTFLTNILSHKLFATNTSEISVGDYSGQPYPTSLVLLLNSVYEFVKVYCNLNDIGYEIFIKMNL'
        'NDHEASNGLLGKFNTNLKEIVSQYKNFKDRLYIFRADLKNDGDEELFLLSKSLR'},
    'P53378': {'db_code':'TBG_YEAST', 'sequence':
        'MGGEIITLQAGQCGNHVGKFLWSQLAKEHAIGTDGLSQLPDSSTERDDDTKPFFRENSRNKFTPRA'
        'IMMDSEPSVIADVENTFRGFFDPRNTWVASDGASAGNSWANGYDIGTRNQDDILNKIDKEIDSTDN'
        'FEGFQLLHSVAGGTGSGLGSNLLEALCDRYPKKILTTYSVFPARSSEVVVQSYNTILALRRLIEDS'
        'DATVVFDNASLLNISGKVFRNPNIDLQHTNQLISTIISSVTNSIRFPSYMYSSMSSIYSTLIPSPE'
        'LHFLSPSFTPFTSDYIHDDIAHKGHSSYDVMLDLLDPSNSLVSTAMNNPTYFNVYNTIIGNVEPRQ'
        'ISRAMTKLQQRIKFPSWSSSAMHVNIGRRSPYLPLQPNENEVSGMMLSNMSTVVNVFENACNTFDK'
        'VFAKGAFLNNYNVGDLFQSMQNVQDEFAESREVVQSLMEDYVAAEQDSYLDDVLVDDENMVGELEE'
        'DLDADGDHKLV'},
    'P32380': {'db_code':'SP110_YEAST', 'sequence':
        'MDEASHLPNGSLKNMEFTPVGFIKSKRNTTQTQVVSPTKVPNANNGDENEGPVKKRQRRSIDDTID'
        'STRLFSEASQFDDSFPEIKANIPPSPRSGNVDKSRKRNLIDDLKKDVPMSQPLKEQEVREHQMKKE'
        'RFDRALESKLLGKRHITYANSDISNKELYINEIKSLKHEIKELRKEKNDTLNNYDTLEEETDDLKN'
        'RLQALEKELDAKNKIVNSRKVDDHSGCIEEREQMERKLAELERKLKTVKDQVLELENNSDVQSLKL'
        'RSKEDELKNLMNELNELKSNAEEKDTQLEFKKNELRKRTNELNELKIKSDEMDLQLKQKQNESKRL'
        'KDELNELETKFSENGSQSSAKENELKMLKNKIAELEEEISTKNSQLIAKEGKLASLMAQLTQLESK'
        'LNQRDSQLGSREEELKKTNDKLQKDIRIAREETVSKDERIIDLQKKVKQLENDLFVIKKTHSESKT'
        'ITDNELESKDKLIKILENDLKVAQEKYSKMEKELKEREFNYKISESKLEDEKTTLNEKISNLAAEN'
        'SQLKNKIEDNSTATHHMKENYEKQLESLRKDIEEYKESAKDSEDKIEELKIRIAENSAKVSEKRSK'
        'DIKQKDEQISDLTQNLKLQEDEISSLKSIIDRYKKDFNQLKSEQSNIQHDLNLQILNLENKLIESE'
        'DELKSLRDSQKIEIENWKRKYNNLSLENDRLLTEKESASDKEREISILNRKLDEMDKEKWNLQESK'
        'EKYKRELQKVITANDRLRREKEELNENSNNIRIMEDKMTRIKKNYLSEITSLQEENRRLEERLILN'
        'ERRKDNDSTMQLNDIISYYKLKYHSEVRHNNDLKVINDYLNKVLALGTRRLRLDTRKGEHSLNISL'
        'PDDDELDRDYYNSHVYTRYHDYEYPLRFNLNRRGPYFERRLSFKTVALLVLACVRMKRIAFYRRSD'
        'DNRLRILRDRIESSSGRISW'},
}

if 'JOB_ID' in os.environ:
    ihm.Citation.from_pubmed_id = classmethod(mock_from_pubmed)
    if hasattr(ihm, 'reference'):
        def from_acc(cls, accession):
            return cls(accession=accession, **accession_map[accession])
        ihm.reference.UniProtSequence.from_accession = classmethod(from_acc)
